/*
 * Ancestris - http://www.ancestris.org
 * 
 * Copyright 2011 Ancestris
 * 
 * Author: Daniel Andre (daniel@ancestris.org).
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 */

/*
 * ASexBean.java
 *
 * Created on 15 janv. 2011, 23:31:08
 */

package ancestris.modules.beans;

import genj.edit.beans.PropertyBean;
import genj.gedcom.GedcomException;
import genj.gedcom.Property;
import genj.gedcom.PropertySex;
import genj.gedcom.TagPath;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 *
 * @author daniel
 */
public class ASexBean extends PropertyBean {
    public enum Dir {X_AXIS, Y_AXIS};

    /** Creates new form ASexBean */
    public ASexBean() {
        initComponents();

        ActionHandler handler = new ActionHandler();
        male.addActionListener(handler);
        female.addActionListener(handler);
        unknown.addActionListener(handler);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        group = new javax.swing.ButtonGroup();
        male = new javax.swing.JRadioButton();
        female = new javax.swing.JRadioButton();
        unknown = new javax.swing.JRadioButton();

        setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.Y_AXIS));

        group.add(male);
        male.setText(org.openide.util.NbBundle.getMessage(ASexBean.class, "ASexBean.male.text")); // NOI18N
        add(male);

        group.add(female);
        female.setText(org.openide.util.NbBundle.getMessage(ASexBean.class, "ASexBean.female.text")); // NOI18N
        add(female);

        group.add(unknown);
        unknown.setText(org.openide.util.NbBundle.getMessage(ASexBean.class, "ASexBean.unknown.text")); // NOI18N
        add(unknown);
    }// </editor-fold>//GEN-END:initComponents

    // FIXME: ne fonctionne pas, pas le temps de regarder
//    private Dir direction = Dir.Y_AXIS;
//
//    /**
//     * Get the value of direction
//     *
//     * @return the value of direction
//     */
//    public Dir getDirection() {
//        return direction;
//    }
//
//    /**
//     * Set the value of direction
//     *
//     * @param direction new value of direction
//     */
//    public void setDirection(Dir direction) {
//        this.direction = direction;
//        switch (direction) {
//            case X_AXIS:
//                setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.X_AXIS));
//                break;
//            case Y_AXIS:
//                setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.Y_AXIS));
//                break;
//        }
//        invalidate();
//        repaint();
//    }
//
    @Override
    protected void setPropertyImpl(Property prop) {
    defaultFocus = male;
    group.clearSelection();

    PropertySex sex = (PropertySex)prop;
    if (sex!=null)
      switch (sex.getSex()) {
        case PropertySex.MALE:
          male.doClick();
          defaultFocus = male;
          break;
        case PropertySex.FEMALE:
          female.doClick();
          defaultFocus = female;
          break;
        case PropertySex.UNKNOWN:
          unknown.doClick();
          defaultFocus = unknown;
          break;
      }

    // Done
    }

    @Override
    protected void commitImpl(Property property) throws GedcomException {
        PropertySex sex = (PropertySex)property;
        sex.setSex(getSex());
    }
  /**
   * Get current sex
   */
  private int getSex() {

    if (male.isSelected())
      return PropertySex.MALE;
    if (female.isSelected())
      return PropertySex.FEMALE;
    return PropertySex.UNKNOWN;

  }

    public void setRoot(Property root) {
        setContext(root, new TagPath("SEX"),root.getProperty("SEX"));

    }



  @Override
  public Dimension getMaximumSize() {
    return getPreferredSize();
  }

  private class ActionHandler implements ActionListener {
        @Override
    public void actionPerformed(ActionEvent e) {
      changeSupport.fireChangeEvent();
    }
  }


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JRadioButton female;
    private javax.swing.ButtonGroup group;
    private javax.swing.JRadioButton male;
    private javax.swing.JRadioButton unknown;
    // End of variables declaration//GEN-END:variables

}

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Batches and Semantic Web mash ups</title>
        <link rel="stylesheet" href="./ancestris.css" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="./ancestris.css">
    </head>
    <body>
        <a name="_Top_"></a>
        <center>
            <h2 class="ancestris_help_title">Batches and Semantic Web mash ups</h2>
        </center>
        <br>
        <table border="0" width="100%">
            <tr>
                <td width="65%">
                    &nbsp;
                </td>
                <td width="35%">
                    <p style="font-style: italic; text-align: justify;
                    text-justify: newspaper; font-size: 10px;">
                        <font color="#0b7700"><u>Author</u></font>: Jo Pol.<br>
                        <font color="#0b7700"><u>Maintenance</u></font>: Jo Pol, You.
                    </p>
                </td>
             </tr>
        </table>
        <br>

        <p class="justify">
            With external tools you can query more than just a single family tree,
            or create a batch that generates mutiple reports in one go.
        </p>

        <a name="semantic-intro"></a>
        <h3 class="ancestris_help_title">Introduction to the semantic web</h3>

        <p class="justify">
            This is a very brief introduction but it should have the most important
            pointers to start browsing the web about the subject.
            The semantic web uses triples of URI's: subject predicate object.
            These triples can be stored in different formats. RDF is the most widely supprted format.
            The turtle format is much less verbose and therefore easier to read.
            The triples get meanings with ontologies (also expressed in triples)
            though a human can guess a lot without following the mathematical definitions.
            The mother of all ontologies is OWL. An ontology also implies inference. 
            For example: A isAncesterOf B, B isAncestorOf C -> A isAncestorOf C.
            At the moment applying full-fledged inference is slow. Common practice
            is to apply just the rules you actually need.
        </p>
        <p class="justify">
            The conversion performed by the plugin does not comply to an established ontology.
            Cross site queries and inference would be easier when using
            something like FOAF or a similar ontology. 
            The chosen format however was quick and easy to implement
            and is easy to recognise by GedCom tigers.
            It might be wise to monitor for ontologies that might emerge and could
            replace the quick-and-dirty approach.
            A start is made with an ontology to bridge the gap between the unortodox format and the web.
            The status is not clear but you can find the plain text file
            <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
                <param name="content" value="in the code base">
                <param name="text" value="<html><u>http://arvernes.dyndns.org/fgenj/trunk/AncestrisExtensions/report.rdf/src/genjreports/rdf/GedcomTags.ttl</u></html>">
                <param name="textFontSize" value="medium">
                <param name="textColor" value="blue">
            </object><br/>
        </p>

        <h3 class="ancestris_help_title">Mash up in short</h3>

        <a name="rdf-data"></a>
        <p class="justify">
            The plugin lets you query just a single family tree. 
            The used techniques however allow to 
            cross-query multiple family trees and/or data from the web.
            DbPedia could be an interesting almanac, 
            for example to find famous contemporary local people.
            GeoNames is interesting for maps.
            For a start you could download some intersting cities that are relevant for your family-tree.
            <br>A DBPedia example:
            <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
                <param name="content" value="http://dbpedia.org/resource/Berlin/">
                <param name="text" value="<html><u>http://dbpedia.org/data/Berlin.n3</u></html>">
                <param name="textFontSize" value="medium">
                <param name="textColor" value="blue">
            </object>
            <br/>Amsterdam from GeoNames
            <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
                <param name="content" value="http://www.geonames.org/2759794/amsterdam.html">
                <param name="text" value="<html><u>http://sws.geonames.org/2759794/about.rdf</u></html>">
                <param name="textFontSize" value="medium">
                <param name="textColor" value="blue">
            </object><br/>
            You may find more intersting resources via the
            <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
                <param name="content" value="LOD cloud diagram">
                <param name="text" value="<html><u>http://richard.cyganiak.de/2007/10/lod/</u></html>">
                <param name="textFontSize" value="medium">
                <param name="textColor" value="blue">
            </object><br/>
        </p>

        <h3 class="ancestris_help_title">Batches in short</h3>
        <p class="justify">
            The plugin uses the jena library to perform its tasks. 
            Jena has also command line tools that can perform the same tasks and more, 
            except for the conversion from the gedcom to triples.
            Jena is just an example of available tools.
            You can use the command line tools for mashups and/or
            create batches to run multiple queries with a single command.
        </p>
        <h4>More than you want to know:</h4>
        <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
            <param name="content" value="jena.apache.org">
            <param name="text" value="<html><u>http://jena.apache.org/documentation/query/cmds.html</u></html>">
            <param name="textFontSize" value="medium">
            <param name="textColor" value="blue">
        </object>
        <h4>The least you want to know:</h4>
        <p class="justify">
            Look for downloads via the link above, get apache-jena and unpack it. 
            Open a command line window and adjust <code>x.y.z</code> and each <code>PATH_TO</code>
            in the commands below to your situation. 
            Note that the variable JENAROOT is not just to provide shorthands,
            but is required by the other commands.
            Creation and using the file <code>merged.n3</code> is optional,
            it is intended for data downloaded from the web. 
            The option <code>--help</code> explains more about the commands.
        </p>
        <p>Windows</p>
        <pre>
            set JENAROOT=C:\PATH_TO\apache-jena-x.y.z
            %JENAROOT%\bat\rdfcat.bat -out N3 c:\PATH_TO\*.rdf > c:\PATH_TO\merged.n3
            %JENAROOT%\bat\arq.bat --graph c:\PATH_TO\merged.rdf --graph c:\PATH_TO\gedcom.ttl -graph c:\PATH_TO\links.n3 --query c:\PATH_TO\query.arq > c:\PATH_TO\result.txt
        </pre>
        <p>Mac / Unix</p>
        <pre>
            set JENAROOT=/PATH_TO/apache-jena-x.y.z
            $JENAROOT/bin/rdfcat -out N3 /PATH_TO/*.rdf > /PATH_TO/merged.n3
            $JENAROOT/bin/arq --graph /PATH_TO/merged.n3 --graph /PATH_TO/gedcom.ttl -graph /PATH_TO/links.n3 --query /PATH_TO/query.arq > /PATH_TO/result.txt
        </pre>
        <p class="justify">
            Mashup example for the Kennedy family tree:<br/>
        </p>
        <ul>
            <li>a query <a href="./kennedy-mashup/mashup.arq">mashup.arq</a></li>
            <li>downloaded and merged data <a href="./kennedy-mashup/merged.n3">merged.n3</a></li>
            <li>linking downloaded data with gedcom data <a href="./kennedy-mashup/links.n3">links.n3</a></li>
        </ul>
        <object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
            <param name="content" value="mashup.arq">
            <param name="text" value="<html><u>http://jena.apache.org/documentation/query/cmds.html</u></html>">
            <param name="textFontSize" value="medium">
            <param name="textColor" value="blue">
        </object>
        <h3 class="ancestris_help_title">FAQ</h3>
        <dl>
            <dt>The <code>arq</code> command complains about prefixes.</dt>
            <dd><p>This might have one of the following causes:</p>
                <ul><li><p>
                    Remove the warninngs about illegal characters
                    in the file <code>merged.n3</code>
                </p></li><li><p>
                   The mashup example for the Kennedy's contains explicit namespace prefixes.
                   The other examples don't, the plugin fills in the prefixes.
                   So copy the header of the mashup query into the other queries 
                   if you want to use them with the command line.
                </p></li></ul>
            </dd>
            <dt><p>The <code>arq</code> command complains about Triples not terminated by DOT</p></dt>
            <dd><p>The format N3 and TTL may reduce the predicates
                   <code>rdf:type</code> and <code>owl:sameAs</code> to
                   "a" respectively "=". 
                   It looks like <code>arq</code> does not (yet?) support the latter. 
                   So replace the predicate "=" by "owl:sameAs"
                   in the file <code>merged.n3</code>
                </p>
            </dd>
            <dt><p>The XML produced by the plugin looks like a nice table, the batch produces plain xml.</p></dt>
            <dd><p>The plugin inserts an XSLT reference into the xml. 
                   The browsers applies that transformation into HTML.
                   With the batch tool, you have to insert that XSLT reference by yourself.
                   By the way, most browsers don't like cross-site scripting,
                   so the XML and XSLT file should be in the same doamin.
                </p>
            </dd>
            <dt><p>...</p></dt>
            <dd><p>...</p></dd>
        </dl>
        <br>
        <br>
        <br>
        <br>
        <a href="rdf-todo.html#_Top_">Top</a>
        <br>
        <br>
    </body>
</html>
<!--
Tip: to create a link which will open in an external web browser, try on the end of a line/paragraph:
<object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
    <param name="content" value="http://www.netbeans.org/">
    <param name="text" value="<html><u>http://www.netbeans.org/</u></html>">
    <param name="textFontSize" value="medium">
    <param name="textColor" value="blue">
</object>
To create a link to a help set from another module, you need to know the code name base and path, e.g.:
<a href="nbdocs://org.netbeans.modules.usersguide/org/netbeans/modules/usersguide/configure/configure_options.html">Using the Options Window</a>
(This link will behave sanely if that module is disabled or missing.)
-->
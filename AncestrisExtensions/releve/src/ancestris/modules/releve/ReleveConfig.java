package ancestris.modules.releve;

import ancestris.modules.releve.model.DataManager;
import java.awt.Dimension;
import java.awt.Toolkit;
import org.openide.util.NbBundle;

/**
 *
 * @author Michel
 */


public class ReleveConfig extends javax.swing.JDialog {

    DataManager dataManager;
    
    public static void show(java.awt.Frame parent, DataManager dataManager) {
        final ReleveConfig dialog = new ReleveConfig(parent, dataManager);
        
        dialog.addWindowListener(new java.awt.event.WindowAdapter() {

            @Override
            public void windowClosing(java.awt.event.WindowEvent e) {
                dialog.setVisible(false);
                dialog.dispose();
            }
        });
        dialog.setVisible(true);
    }
    
    /**
     * Creates new form ReleveConfig
     */
    public ReleveConfig(java.awt.Frame parent, DataManager dataManager) {
        super(parent, true);
        initComponents();
        setTitle(NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.Title"));
        this.dataManager = dataManager;
        
        cityNameEntry.setText(dataManager.getCityName());
        cityCodeEntry.setText(dataManager.getCityCode());
        countyNameEntry.setText(dataManager.getCountyName());
        stateEntry.setText(dataManager.getStateName());
        countryEntry.setText(dataManager.getCountyName());   
        
        final int width = getWidth();
        final int height = getHeight();
        final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (screenSize.width / 2) - (width / 2);
        int y = (screenSize.height / 2) - (height / 2);
        setLocation(x, y);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        placePanel = new javax.swing.JPanel();
        cityNameLabel = new javax.swing.JLabel();
        cityNameEntry = new javax.swing.JTextField();
        cityCodeLabel = new javax.swing.JLabel();
        cityCodeEntry = new javax.swing.JTextField();
        countyNameLabel = new javax.swing.JLabel();
        countyNameEntry = new javax.swing.JTextField();
        stateLabel = new javax.swing.JLabel();
        stateEntry = new javax.swing.JTextField();
        countryLabel = new javax.swing.JLabel();
        countryEntry = new javax.swing.JTextField();
        jTextArea1 = new javax.swing.JTextArea();
        jPanelButton = new javax.swing.JPanel();
        jButtonOk = new javax.swing.JButton();
        jButtonCancel = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        placePanel.setBorder(javax.swing.BorderFactory.createTitledBorder(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.placePanel.border.title"))); // NOI18N
        placePanel.setPreferredSize(new java.awt.Dimension(460, 150));
        placePanel.setRequestFocusEnabled(false);
        placePanel.setLayout(new java.awt.GridBagLayout());

        cityNameLabel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.cityNameLabel.text")); // NOI18N
        cityNameLabel.setFocusable(false);
        cityNameLabel.setPreferredSize(null);
        cityNameLabel.setVerticalTextPosition(javax.swing.SwingConstants.TOP);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        placePanel.add(cityNameLabel, gridBagConstraints);

        cityNameEntry.setMinimumSize(new java.awt.Dimension(50, 20));
        cityNameEntry.setName("cityNameEntry"); // NOI18N
        cityNameEntry.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        placePanel.add(cityNameEntry, gridBagConstraints);

        cityCodeLabel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.cityCodeLabel.text")); // NOI18N
        cityCodeLabel.setFocusable(false);
        cityCodeLabel.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 4, 0, 0);
        placePanel.add(cityCodeLabel, gridBagConstraints);

        cityCodeEntry.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        placePanel.add(cityCodeEntry, gridBagConstraints);

        countyNameLabel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.countyNameLabel.text")); // NOI18N
        countyNameLabel.setFocusable(false);
        countyNameLabel.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        placePanel.add(countyNameLabel, gridBagConstraints);

        countyNameEntry.setMinimumSize(new java.awt.Dimension(50, 20));
        countyNameEntry.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipadx = 2;
        gridBagConstraints.ipady = 2;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        placePanel.add(countyNameEntry, gridBagConstraints);

        stateLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        stateLabel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.stateLabel.text")); // NOI18N
        stateLabel.setFocusable(false);
        stateLabel.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        stateLabel.setPreferredSize(null);
        stateLabel.setRequestFocusEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 4, 0, 0);
        placePanel.add(stateLabel, gridBagConstraints);

        stateEntry.setMinimumSize(new java.awt.Dimension(50, 20));
        stateEntry.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        placePanel.add(stateEntry, gridBagConstraints);

        countryLabel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.countryLabel.text")); // NOI18N
        countryLabel.setFocusable(false);
        countryLabel.setPreferredSize(null);
        countryLabel.setRequestFocusEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        placePanel.add(countryLabel, gridBagConstraints);

        countryEntry.setMinimumSize(new java.awt.Dimension(50, 20));
        countryEntry.setPreferredSize(null);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 2, 2, 2);
        placePanel.add(countryEntry, gridBagConstraints);

        jTextArea1.setBackground(javax.swing.UIManager.getDefaults().getColor("Button.background"));
        jTextArea1.setColumns(20);
        jTextArea1.setEditable(false);
        jTextArea1.setRows(3);
        jTextArea1.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.jTextArea1.text")); // NOI18N
        jTextArea1.setWrapStyleWord(true);
        jTextArea1.setAutoscrolls(false);
        jTextArea1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jTextArea1.setFocusable(false);
        jTextArea1.setMinimumSize(new java.awt.Dimension(200, 22));
        jTextArea1.setPreferredSize(new java.awt.Dimension(460, 58));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        placePanel.add(jTextArea1, gridBagConstraints);

        getContentPane().add(placePanel, java.awt.BorderLayout.CENTER);

        jButtonOk.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.jButtonOk.text")); // NOI18N
        jButtonOk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonOkActionPerformed(evt);
            }
        });
        jPanelButton.add(jButtonOk);

        jButtonCancel.setText(org.openide.util.NbBundle.getMessage(ReleveConfig.class, "ReleveConfig.jButtonCancel.text")); // NOI18N
        jButtonCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCancelActionPerformed(evt);
            }
        });
        jPanelButton.add(jButtonCancel);

        getContentPane().add(jPanelButton, java.awt.BorderLayout.SOUTH);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * enregistre les modifications et ferme la fenetre
     * @param evt 
     */
    private void jButtonOkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonOkActionPerformed
        // j'enregistre les nouvelles valeurs dans dataManager
        dataManager.setPlace(
                cityNameEntry.getText().trim(),
                cityCodeEntry.getText().trim(),
                countyNameEntry.getText().trim(),
                stateEntry.getText().trim(),
                countryEntry.getText().trim()
            );
        setVisible(false);
        dispose();
    }//GEN-LAST:event_jButtonOkActionPerformed

    private void jButtonCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCancelActionPerformed
        setVisible(false);
        dispose();
    }//GEN-LAST:event_jButtonCancelActionPerformed

    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField cityCodeEntry;
    private javax.swing.JLabel cityCodeLabel;
    private javax.swing.JTextField cityNameEntry;
    private javax.swing.JLabel cityNameLabel;
    private javax.swing.JTextField countryEntry;
    private javax.swing.JLabel countryLabel;
    private javax.swing.JTextField countyNameEntry;
    private javax.swing.JLabel countyNameLabel;
    private javax.swing.JButton jButtonCancel;
    private javax.swing.JButton jButtonOk;
    private javax.swing.JPanel jPanelButton;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JPanel placePanel;
    private javax.swing.JTextField stateEntry;
    private javax.swing.JLabel stateLabel;
    // End of variables declaration//GEN-END:variables
}

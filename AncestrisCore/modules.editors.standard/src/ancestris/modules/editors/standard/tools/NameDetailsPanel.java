/*
 * Ancestris - http://www.ancestris.org
 * 
 * Copyright 2016 Ancestris
 * 
 * Author: Frédéric Lapeyre (frederic@ancestris.org).
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 */
package ancestris.modules.editors.standard.tools;

import ancestris.modules.editors.standard.IndiPanel;
import genj.gedcom.Indi;
import genj.gedcom.PropertyName;

/**
 *
 * 
 * PERSONAL_NAME_STRUCTURE: =  5.5
 * 
 *   n  NAME <NAME_PERSONAL>  {1:1}
 *     +1 NPFX <NAME_PIECE_PREFIX>  {0:1}                           <== used in this details panel     Dr.
 *     +1 GIVN <NAME_PIECE_GIVEN>  {0:1}                         ***<== Firstname (main panel)         Robert
 *     +1 SPFX <NAME_PIECE_SURNAME_PREFIX>  {0:1}                   <== used in this details panel     de la
 *     +1 SURN <NAME_PIECE_SURNAME>  {0:1}                       ***<== Lastname (main panel)          Taille
 *     +1 NSFX <NAME_PIECE_SUFFIX>  {0:1}                           <== used in this details panel     Junior
 *     +1 NICK <NAME_PIECE_NICKNAME>  {0:1}                         <== used in this details panel     Bob
 *     +1 <<SOURCE_CITATION>>  {0:M}
 *       +2 <<NOTE_STRUCTURE>>  {0:M}
 *       +2 <<MULTIMEDIA_LINK>>  {0:M}
 *     +1 <<NOTE_STRUCTURE>>  {0:M}
 * 
 * 
 * PERSONAL_NAME_STRUCTURE:  5.5.1                              <== only use what we have in 5.5
 *   n NAME <NAME_PERSONAL>     {1:1}
 *   +1 TYPE <NAME_TYPE>    {0:1}
 *   +1 <<PERSONAL_NAME_PIECES>>    {0:1}
 *      NPFX <NAME_PIECE_PREFIX>   {0:1}
 *      GIVN <NAME_PIECE_GIVEN>   {0:1}
 *      SPFX <NAME_PIECE_SURNAME_PREFIX>   {0:1}
 *      SURN <NAME_PIECE_SURNAME>   {0:1}
 *      NSFX <NAME_PIECE_SUFFIX>   {0:1}
 *      NICK <NAME_PIECE_NICKNAME>    {0:1}
 * 
 *   +1 FONE <NAME_PHONETIC_VARIATION>  {0:M}
 *      +2 TYPE <PHONETIC_TYPE>     {1:1}
 *      +2 <<PERSONAL_NAME_PIECES>>     {0:1}
 *      etc.
 *   +1 ROMN <NAME_ROMANIZED_VARIATION>     {0:M}
 *      +2 TYPE <ROMANIZED_TYPE>    {1:1}
 *      +2 <<PERSONAL_NAME_PIECES>>     {0:1}
 *      etc.
 * 
 * @author frederic
 */
public class NameDetailsPanel extends javax.swing.JPanel {

    
    /**
     * Creates new form NameDetailsPanel
     */
    public NameDetailsPanel() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        surnamePrefixText = new javax.swing.JTextField();
        exampleLabel = new javax.swing.JLabel();
        surnameText = new javax.swing.JTextField();
        suffixText = new javax.swing.JTextField();
        nickText = new javax.swing.JTextField();
        exPrefix = new javax.swing.JLabel();
        exFirst = new javax.swing.JLabel();
        prefixLabel = new javax.swing.JLabel();
        exSurnPrefix = new javax.swing.JLabel();
        firstLabel = new javax.swing.JLabel();
        exSurname = new javax.swing.JLabel();
        surnamePrefixLabel = new javax.swing.JLabel();
        exSuffix = new javax.swing.JLabel();
        surnameLabel = new javax.swing.JLabel();
        suffixLabel = new javax.swing.JLabel();
        nickLabel = new javax.swing.JLabel();
        prefixText = new javax.swing.JTextField();
        firstText = new javax.swing.JTextField();

        jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        surnamePrefixText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.surnamePrefixText.text")); // NOI18N

        exampleLabel.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exampleLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exampleLabel.text")); // NOI18N
        exampleLabel.setPreferredSize(new java.awt.Dimension(57, 18));

        surnameText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.surnameText.text")); // NOI18N

        suffixText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.suffixText.text")); // NOI18N

        nickText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.nickText.text")); // NOI18N

        exPrefix.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exPrefix, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exPrefix.text")); // NOI18N
        exPrefix.setPreferredSize(new java.awt.Dimension(42, 18));

        exFirst.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exFirst, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exFirst.text")); // NOI18N
        exFirst.setPreferredSize(new java.awt.Dimension(95, 18));

        org.openide.awt.Mnemonics.setLocalizedText(prefixLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.prefixLabel.text")); // NOI18N

        exSurnPrefix.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exSurnPrefix, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exSurnPrefix.text")); // NOI18N
        exSurnPrefix.setPreferredSize(new java.awt.Dimension(31, 18));

        org.openide.awt.Mnemonics.setLocalizedText(firstLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.firstLabel.text")); // NOI18N

        exSurname.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exSurname, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exSurname.text")); // NOI18N
        exSurname.setPreferredSize(new java.awt.Dimension(39, 18));

        org.openide.awt.Mnemonics.setLocalizedText(surnamePrefixLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.surnamePrefixLabel.text")); // NOI18N

        exSuffix.setFont(new java.awt.Font("DejaVu Sans", 2, 12)); // NOI18N
        org.openide.awt.Mnemonics.setLocalizedText(exSuffix, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.exSuffix.text")); // NOI18N
        exSuffix.setPreferredSize(new java.awt.Dimension(36, 18));

        org.openide.awt.Mnemonics.setLocalizedText(surnameLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.surnameLabel.text")); // NOI18N

        org.openide.awt.Mnemonics.setLocalizedText(suffixLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.suffixLabel.text")); // NOI18N

        org.openide.awt.Mnemonics.setLocalizedText(nickLabel, org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.nickLabel.text")); // NOI18N

        prefixText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.prefixText.text")); // NOI18N
        prefixText.setPreferredSize(new java.awt.Dimension(50, 27));

        firstText.setText(org.openide.util.NbBundle.getMessage(NameDetailsPanel.class, "NameDetailsPanel.firstText.text")); // NOI18N

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(exampleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(prefixText, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(prefixLabel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(exPrefix, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(18, 18, 18)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(firstText)
                                    .addComponent(firstLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                                .addGap(24, 24, 24)
                                .addComponent(exFirst, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(exSurnPrefix, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addComponent(surnamePrefixLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(surnamePrefixText))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(exSurname, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(10, 10, 10))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(surnameLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(surnameText))
                                .addGap(18, 18, 18)))
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(exSuffix, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addComponent(suffixLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(suffixText, javax.swing.GroupLayout.PREFERRED_SIZE, 78, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap())))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(nickLabel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(nickText)
                        .addGap(382, 382, 382))))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(prefixLabel)
                    .addComponent(firstLabel)
                    .addComponent(surnamePrefixLabel)
                    .addComponent(surnameLabel)
                    .addComponent(suffixLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(prefixText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(firstText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(surnamePrefixText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(surnameText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(suffixText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(exPrefix, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(exFirst, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(exSurnPrefix, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(exSurname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(exSuffix, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(exampleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(26, 26, 26)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(nickLabel)
                    .addComponent(nickText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel exFirst;
    private javax.swing.JLabel exPrefix;
    private javax.swing.JLabel exSuffix;
    private javax.swing.JLabel exSurnPrefix;
    private javax.swing.JLabel exSurname;
    private javax.swing.JLabel exampleLabel;
    private javax.swing.JLabel firstLabel;
    private javax.swing.JTextField firstText;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel nickLabel;
    private javax.swing.JTextField nickText;
    private javax.swing.JLabel prefixLabel;
    private javax.swing.JTextField prefixText;
    private javax.swing.JLabel suffixLabel;
    private javax.swing.JTextField suffixText;
    private javax.swing.JLabel surnameLabel;
    private javax.swing.JLabel surnamePrefixLabel;
    private javax.swing.JTextField surnamePrefixText;
    private javax.swing.JTextField surnameText;
    // End of variables declaration//GEN-END:variables

    public void setDetails(Indi indi) {
        PropertyName p = (PropertyName) indi.getProperty("NAME", true);
        if (p == null) {
            return;
        }
       
        firstText.setText(indi.getFirstName());   // first and last names are here just for visibility reasons
        surnameText.setText(indi.getLastName());

        prefixText.setText(p.getNamePrefix());
        surnamePrefixText.setText(p.getSurnamePrefix());
        suffixText.setText(p.getSuffix());
        nickText.setText(p.getNick());
    }

    public void saveDetails(Indi indi) {
        PropertyName p = (PropertyName) indi.getProperty("NAME", true);
        if (p == null) {
            return;
        }
        p.setName(prefixText.getText(), indi.getFirstName(), surnamePrefixText.getText(), indi.getLastName(), suffixText.getText(), false);
        p.setNick(nickText.getText());
    }

    public void addListeners(IndiPanel panel) {
        firstText.getDocument().addDocumentListener(panel);
        surnameText.getDocument().addDocumentListener(panel);
        prefixText.getDocument().addDocumentListener(panel);
        surnamePrefixText.getDocument().addDocumentListener(panel);
        suffixText.getDocument().addDocumentListener(panel);
        nickText.getDocument().addDocumentListener(panel);
    }

    public String getFirstName() {
        return firstText.getText();
    }

    public String getLastName() {
        return surnameText.getText();
    }
}
